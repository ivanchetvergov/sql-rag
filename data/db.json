[
  {
    "table": "\"User\"",
    "description": "Table: \"User\" (always use double quotes). Stores platform users. Columns: user_id (PK), username (display name), email, created_at (timestamp when user joined the PLATFORM, use this for 'users who joined in YYYY' queries), bio (text). For queries about competition organizers or participants, JOIN with Competition (via organizer_id) or Participation (via user_id).",
    "attributes": [
      "user_id",
      "username",
      "email",
      "created_at",
      "bio"
    ],
    "examples": [
      "Q: Select all users who joined in 2023 | A: SELECT user_id, username FROM \"User\" WHERE EXTRACT(YEAR FROM created_at) = 2023;",
      "Q: Get all users | A: SELECT * FROM \"User\";"
    ]
  },
  {
    "table": "\"TaskType\"",
    "description": "Table: \"TaskType\" (always use double quotes). Lookup table for competition types. Columns: task_type_id (PK), code (short identifier like 'classification'), description (text explanation), valid_response_format (validation rules). JOIN with Competition via task_type_id to filter by competition type.",
    "attributes": [
      "task_type_id",
      "code",
      "description",
      "valid_response_format"
    ],
    "examples": [
      "Get all task types | SELECT * FROM \"TaskType\";",
      "Find task type by code | SELECT * FROM \"TaskType\" WHERE code = 'classification';",
      "Get task types for competitions | SELECT tt.code, COUNT(c.competition_id) FROM \"TaskType\" tt JOIN \"Competition\" c ON tt.task_type_id = c.task_type_id GROUP BY tt.code;",
      "List task type names | SELECT task_type_id, code, description FROM \"TaskType\";"
    ]
  },
  {
    "table": "\"Metric\"",
    "description": "Table: \"Metric\" (always use double quotes). Scoring functions for evaluations. Columns: metric_id (PK), task_type_id (FK to TaskType), name (metric name like 'LogLoss', 'MSE'), formula, optimization_direction ('maximize' or 'minimize'), description. JOIN with TaskType via task_type_id or CompetitionConfig via metric_id.",
    "attributes": [
      "metric_id",
      "task_type_id",
      "name",
      "formula",
      "optimization_direction",
      "description"
    ],
    "examples": [
      "Get all metrics | SELECT * FROM \"Metric\";",
      "Find metrics to maximize | SELECT * FROM \"Metric\" WHERE optimization_direction = 'maximize';",
      "Get metrics for task type | SELECT m.name FROM \"Metric\" m JOIN \"TaskType\" t ON m.task_type_id = t.task_type_id WHERE t.code = 'classification';",
      "List metric names | SELECT metric_id, name, optimization_direction FROM \"Metric\";"
    ]
  },
  {
    "table": "\"Competition\"",
    "description": "Table: \"Competition\" (always use double quotes). Contest entity. Columns: competition_id (PK), organizer_id (FK to User.user_id - the user who CREATED/ORGANIZED this competition, NOT participants), task_type_id (FK to TaskType), title (competition NAME, not 'competition_name'), description, start_at (start date), end_at (end date), status ('draft', 'active', 'archived'). IMPORTANT: For 'competitions organized BY user X' use WHERE organizer_id = X (direct filter, no JOIN to Participation). For organizer name: JOIN User ON Competition.organizer_id = User.user_id. For participants: use Participation table instead.",
    "attributes": [
      "competition_id",
      "organizer_id",
      "task_type_id",
      "title",
      "description",
      "start_at",
      "end_at",
      "status"
    ],
    "examples": [
      "Get active competitions | SELECT * FROM \"Competition\" WHERE status = 'active';",
      "Competitions organized by user 5 | SELECT competition_id, title FROM \"Competition\" WHERE organizer_id = 5;",
      "Competitions started in 2024 | SELECT * FROM \"Competition\" WHERE EXTRACT(YEAR FROM start_at) = 2024;",
      "Get competition with organizer name | SELECT c.title, u.username FROM \"Competition\" c JOIN \"User\" u ON c.organizer_id = u.user_id;"
    ]
  },
  {
    "table": "\"CompetitionConfig\"",
    "description": "Table: \"CompetitionConfig\" (always use double quotes). Rules for competitions. Columns: config_id (PK), competition_id (FK to Competition), metric_id (FK to Metric), aggregation_rule ('best', 'average'), max_daily_submissions (submission limit). JOIN with Competition and Metric for detailed config queries.",
    "attributes": [
      "config_id",
      "competition_id",
      "metric_id",
      "aggregation_rule",
      "max_daily_submissions"
    ],
    "examples": [
      "Get config for competition 10 | SELECT * FROM \"CompetitionConfig\" WHERE competition_id = 10;",
      "Competitions with best score rule | SELECT c.title FROM \"Competition\" c JOIN \"CompetitionConfig\" cc ON c.competition_id = cc.competition_id WHERE cc.aggregation_rule = 'best';",
      "Get metric used in competition | SELECT m.name FROM \"Metric\" m JOIN \"CompetitionConfig\" cc ON m.metric_id = cc.metric_id WHERE cc.competition_id = 5;",
      "Find high submission limit competitions | SELECT * FROM \"CompetitionConfig\" WHERE max_daily_submissions > 10;"
    ]
  },
  {
    "table": "\"Prize\"",
    "description": "Table: \"Prize\" (always use double quotes). Monetary rewards. Columns: prize_id (PK), competition_id (FK to Competition), rank_position (1st, 2nd, etc.), description (text), amount (numeric), currency (default 'USD'). Use for queries about 'prizes', 'money', 'rewards', 'awards'. JOIN Competition via competition_id.",
    "attributes": [
      "prize_id",
      "competition_id",
      "rank_position",
      "description",
      "amount",
      "currency"
    ],
    "examples": [
      "Get prizes for competition 3 | SELECT * FROM \"Prize\" WHERE competition_id = 3;",
      "Total prize amount for competition | SELECT SUM(amount) FROM \"Prize\" WHERE competition_id = 5;",
      "Competitions with prizes over $1000 | SELECT DISTINCT c.title FROM \"Competition\" c JOIN \"Prize\" p ON c.competition_id = p.competition_id WHERE p.amount > 1000;",
      "Get first place prizes | SELECT c.title, p.amount FROM \"Prize\" p JOIN \"Competition\" c ON p.competition_id = c.competition_id WHERE p.rank_position = 1;"
    ]
  },
  {
    "table": "\"Participation\"",
    "description": "Table: \"Participation\" (always use double quotes). User enrollment in competitions AS PARTICIPANTS (not organizers). Columns: participation_id (PK), user_id (FK to User - the PARTICIPANT, NOT organizer), competition_id (FK to Competition), registered_at (timestamp when user joined THIS COMPETITION as participant, NOT platform registration), status ('active', 'disqualified'). Bridge table for User-Competition PARTICIPATION. IMPORTANT: Use this for 'users who participated/competed/played in competition X', NOT for 'competitions organized by user X' (use Competition.organizer_id instead).",
    "attributes": [
      "participation_id",
      "user_id",
      "competition_id",
      "registered_at",
      "status"
    ],
    "examples": [
      "Users in competition 10 | SELECT u.username FROM \"User\" u JOIN \"Participation\" p ON u.user_id = p.user_id WHERE p.competition_id = 10;",
      "Competitions user participated in | SELECT c.title FROM \"Competition\" c JOIN \"Participation\" p ON c.competition_id = p.competition_id WHERE p.user_id = 5;",
      "Count participants per competition | SELECT competition_id, COUNT(*) FROM \"Participation\" GROUP BY competition_id;",
      "Users who participated in 2024 | SELECT DISTINCT u.user_id, u.username FROM \"User\" u JOIN \"Participation\" p ON u.user_id = p.user_id WHERE EXTRACT(YEAR FROM p.registered_at) = 2024;"
    ]
  },
  {
    "table": "\"Dataset\"",
    "description": "Table: \"Dataset\" (always use double quotes). Competition data collections. Columns: dataset_id (PK), competition_id (FK to Competition), name (dataset NAME, not 'dataset_name'), usage_type ('training', 'testing'), is_hidden (boolean), created_at. For 'competitions with datasets', JOIN Competition via competition_id and use Dataset.name.",
    "attributes": [
      "dataset_id",
      "competition_id",
      "name",
      "usage_type",
      "is_hidden",
      "created_at"
    ],
    "examples": [
      "Competitions with datasets | SELECT c.title, d.name FROM \"Competition\" c JOIN \"Dataset\" d ON c.competition_id = d.competition_id;",
      "Training datasets for competition 5 | SELECT * FROM \"Dataset\" WHERE competition_id = 5 AND usage_type = 'training';",
      "Public datasets | SELECT * FROM \"Dataset\" WHERE is_hidden = FALSE;",
      "Count datasets per competition | SELECT competition_id, COUNT(*) FROM \"Dataset\" GROUP BY competition_id;"
    ]
  },
  {
    "table": "\"FileArtifact\"",
    "description": "Table: \"FileArtifact\" (always use double quotes). Physical file metadata. Columns: file_id (PK), dataset_id (FK to Dataset), filename, storage_path, checksum, size_bytes. JOIN Dataset via dataset_id for file queries.",
    "attributes": [
      "file_id",
      "dataset_id",
      "filename",
      "storage_path",
      "checksum",
      "size_bytes"
    ],
    "examples": [
      "Files in dataset 3 | SELECT * FROM \"FileArtifact\" WHERE dataset_id = 3;",
      "Large files over 1GB | SELECT * FROM \"FileArtifact\" WHERE size_bytes > 1073741824;",
      "Get file with dataset name | SELECT f.filename, d.name FROM \"FileArtifact\" f JOIN \"Dataset\" d ON f.dataset_id = d.dataset_id;",
      "Total size of dataset | SELECT SUM(size_bytes) FROM \"FileArtifact\" WHERE dataset_id = 5;"
    ]
  },
  {
    "table": "\"Submission\"",
    "description": "Table: \"Submission\" (always use double quotes). User solution uploads. Columns: submission_id (PK), participation_id (FK to Participation), file_path, submitted_at (timestamp), status ('queued', 'success', 'failed'). JOIN Participation to link users/competitions. For evaluation scores, JOIN Evaluation via submission_id.",
    "attributes": [
      "submission_id",
      "participation_id",
      "file_path",
      "submitted_at",
      "status"
    ],
    "examples": [
      "Submissions for user in competition | SELECT s.* FROM \"Submission\" s JOIN \"Participation\" p ON s.participation_id = p.participation_id WHERE p.user_id = 5 AND p.competition_id = 10;",
      "Successful submissions | SELECT * FROM \"Submission\" WHERE status = 'success';",
      "Recent submissions | SELECT * FROM \"Submission\" ORDER BY submitted_at DESC LIMIT 20;",
      "Count submissions per user | SELECT p.user_id, COUNT(s.submission_id) FROM \"Submission\" s JOIN \"Participation\" p ON s.participation_id = p.participation_id GROUP BY p.user_id;"
    ]
  },
  {
    "table": "\"Evaluation\"",
    "description": "Table: \"Evaluation\" (always use double quotes). Submission scoring results. Columns: evaluation_id (PK), submission_id (FK to Submission), metric_value (numeric score), is_valid (boolean), computed_at (timestamp), error_log. JOIN Submission via submission_id. For best scores, use LeaderboardRow instead.",
    "attributes": [
      "evaluation_id",
      "submission_id",
      "metric_value",
      "is_valid",
      "computed_at",
      "error_log"
    ],
    "examples": [
      "Get evaluations with scores | SELECT s.*, e.metric_value FROM \"Submission\" s JOIN \"Evaluation\" e ON s.submission_id = e.submission_id;",
      "Valid evaluations only | SELECT * FROM \"Evaluation\" WHERE is_valid = TRUE;",
      "Best score for submission | SELECT MAX(metric_value) FROM \"Evaluation\" WHERE submission_id = 100;",
      "Failed evaluations | SELECT * FROM \"Evaluation\" WHERE is_valid = FALSE;"
    ]
  },
  {
    "table": "\"LeaderboardRow\"",
    "description": "Table: \"LeaderboardRow\" (always use double quotes). Competition rankings. Columns: row_id (PK), participation_id (FK to Participation), best_evaluation_id (FK to Evaluation), score (best metric_value), rank (1=winner, 2=second, etc.), updated_at. USE THIS for 'winner', 'top players', 'rankings' queries. For winner of competition X: SELECT User.username FROM LeaderboardRow JOIN Participation ON LeaderboardRow.participation_id = Participation.participation_id JOIN User ON Participation.user_id = User.user_id WHERE Participation.competition_id = X AND LeaderboardRow.rank = 1.",
    "attributes": [
      "row_id",
      "participation_id",
      "best_evaluation_id",
      "score",
      "rank",
      "updated_at"
    ],
    "examples": [
      "Winner of competition 5 | SELECT u.username FROM \"LeaderboardRow\" lr JOIN \"Participation\" p ON lr.participation_id = p.participation_id JOIN \"User\" u ON p.user_id = u.user_id WHERE p.competition_id = 5 AND lr.rank = 1;",
      "Top 3 in competition 10 | SELECT u.username, lr.score, lr.rank FROM \"LeaderboardRow\" lr JOIN \"Participation\" p ON lr.participation_id = p.participation_id JOIN \"User\" u ON p.user_id = u.user_id WHERE p.competition_id = 10 AND lr.rank <= 3 ORDER BY lr.rank;",
      "Leaderboard for competition | SELECT u.username, lr.score, lr.rank FROM \"LeaderboardRow\" lr JOIN \"Participation\" p ON lr.participation_id = p.participation_id JOIN \"User\" u ON p.user_id = u.user_id WHERE p.competition_id = 7 ORDER BY lr.rank;",
      "All winners | SELECT DISTINCT u.username FROM \"LeaderboardRow\" lr JOIN \"Participation\" p ON lr.participation_id = p.participation_id JOIN \"User\" u ON p.user_id = u.user_id WHERE lr.rank = 1;"
    ]
  },
  {
    "table": "\"CodeKernel\"",
    "description": "Table: \"CodeKernel\" (always use double quotes). User code notebooks. Columns: kernel_id (PK), participation_id (FK to Participation), evaluation_id (FK to Evaluation, nullable), title, source_code (text), language ('Python', 'R', etc.), created_at. JOIN Participation and Evaluation for linking.",
    "attributes": [
      "kernel_id",
      "participation_id",
      "evaluation_id",
      "title",
      "source_code",
      "language",
      "created_at"
    ],
    "examples": [
      "Kernels for competition | SELECT ck.* FROM \"CodeKernel\" ck JOIN \"Participation\" p ON ck.participation_id = p.participation_id WHERE p.competition_id = 5;",
      "Python kernels | SELECT * FROM \"CodeKernel\" WHERE language = 'Python';",
      "Kernels by user | SELECT ck.title FROM \"CodeKernel\" ck JOIN \"Participation\" p ON ck.participation_id = p.participation_id WHERE p.user_id = 10;",
      "Recent kernels | SELECT * FROM \"CodeKernel\" ORDER BY created_at DESC LIMIT 10;"
    ]
  }
]
